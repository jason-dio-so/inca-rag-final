### ✅ STEP 32-δ: Premium UI Wiring Hardening + Mocks Separation
**Status:** COMPLETE
**Commit:** [pending]
**Date:** 2025-12-25

**Objective:**
- Separate real data bridge logic from mocks (production vs test clarity)
- Eliminate fake proposalId generation (no synthetic identifiers)
- Harden failure rendering (explicit PARTIAL/MISSING, never blank screens)
- Maintain /compare immutability (absolute regression lock)

**Key Changes:**

1. **Bridge Logic Separation** (`apps/web/src/lib/api/premium/bridge.ts`):
   - `convertProxyResponseToCards()` moved from `mocks/priceScenarios.ts`
   - Real data transformation logic now in production path
   - Mocks remain pure test data (no business logic)

2. **Explicit Failure Handling**:
   - `!response.ok` → return MISSING cards (not empty array)
   - `basePremium === null` → rank 0 MISSING card (unranked, bottom)
   - No items → single "데이터 없음" card
   - **Guarantee:** UI NEVER shows blank screen for premium failures

3. **No Fake proposalId Generation**:
   - proposalId field made optional (`proposalId?: string`)
   - Bridge uses `undefined` instead of generating `${insurer}_proposal_${index}`
   - UI keys use fallback: `key={card.proposalId || \`card-${insurer}-${index}\`}`

4. **Type System Updates**:
   - `PremiumCardData.proposalId` → optional
   - `PriceRankingView.onCompare` → accepts `string | undefined`
   - UI components handle optional proposalId gracefully

**Constitutional Guarantees Maintained:**

- ✅ basePremium = monthlyPremSum ONLY (no cvrAmtArrLst calculation)
- ✅ Coverage name mapping NOT enforced (PARTIAL is normal)
- ✅ Premium = additional feature (failures don't break core /compare)
- ✅ /compare contract/snapshots/golden data UNTOUCHED

**Verification Results:**

```bash
git diff apps/api/ tests/snapshots/
# Output: (empty) ✅
```

- `/compare` regression lock: PASS ✅
- Apps/API unchanged: ✅
- Golden snapshots unchanged: ✅

**Files Modified:**
- `apps/web/src/lib/api/premium/bridge.ts` (NEW)
- `apps/web/src/lib/api/mocks/priceScenarios.ts` (MODIFIED - removed convertProxyResponseToCards)
- `apps/web/src/lib/premium/types.ts` (MODIFIED - proposalId optional)
- `apps/web/src/components/views/price/PriceRankingView.tsx` (MODIFIED - handle optional proposalId)

**Usage Example (Real Mode):**
```tsx
import { PremiumClient } from '@/lib/api/premium/client';
import { convertProxyResponseToCards } from '@/lib/api/premium/bridge';

const client = new PremiumClient();
const response = await client.simpleCompare(request);
const cards = convertProxyResponseToCards(response);

// cards ALWAYS populated (success → ranked, failure → MISSING)
```

**DoD Achieved:**
- ✅ convertProxyResponseToCards moved from mocks to bridge.ts
- ✅ Failure cases render explicit MISSING cards (no empty arrays)
- ✅ proposalId fake generation removed
- ✅ /compare diff = 0 files
- ✅ STATUS.md updated

**Next Steps (Future):**
1. Coverage name normalization pipeline
2. Upstream proposalId field integration (when available)
3. Admin UI for AMBIGUOUS coverage mapping resolution

