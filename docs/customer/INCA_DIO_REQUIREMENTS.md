# INCA DIO Customer Requirements (Compiled)

**Source:** data/inca_dio.pdf
**Date:** 2025-12-26
**Version:** 1.0.0

---

## 문서 목적

본 문서는 data/inca_dio.pdf의 요구사항을 **Constitutional-compliant ViewModel 표현으로 컴파일**한다.

- ❌ 고객 문서의 "추천/종합평가" 표현을 AI 판단으로 해석하지 않는다
- ✅ UI 배치/정렬/강조 요구로 컴파일한다
- ✅ Deterministic Compiler 원칙 준수 (CLAUDE.md)

---

## 표현 컴파일 규칙 (Expression Compilation Rules)

### 1. "종합 평가" → UI 집약 배치

**원문 표현:** "보험료, 보장한도 등 종합적으로 판단하여 상품 비교 추천"

**컴파일 결과:**
```
종합 평가 = 단일 ViewModel 내 다음 요소 집약 배치
  - comparison_table (보장 항목 O/X, 금액, 조건)
  - premium_info (보험료 숫자, 정렬 기준 표시)
  - evidence_panel (근거 문서 링크)
  - warnings (fact-only 상태)

❌ AI 판단 문장 생성 금지
✅ 사용자가 직접 판단할 수 있도록 사실 나열
```

### 2. "추천" → 정렬 + 시각적 강조

**원문 표현:** "가장 저렴한 보험료 정렬순으로 비교", "상품 비교 추천"

**컴파일 결과:**
```
추천 = 기준별 정렬 + 최저/최고 시각적 강조
  - 정렬 기준 명시 (예: "보험료 오름차순")
  - 최저값 파란색 강조
  - 최고값 빨간색 강조
  - ❌ "이 상품을 추천합니다" 문구 금지
  - ✅ "보험료 기준 정렬" 라벨만 표시
```

### 3. "비교" → Fact Table

**원문 표현:** "A사가 다릅니다", "비교해줘"

**컴파일 결과:**
```
비교 = 동일 축 기준 값 나열 + 차이 하이라이트
  - 담보별/슬롯별 행 구성
  - 보험사별 열 구성
  - 값 차이는 셀 강조만 (우열 판단 문구 없음)
  - ❌ "A사가 더 좋습니다" 금지
  - ✅ "A사: 1~120일, B사: 1~180일" (사실만)
```

### 4. "보장 가능 여부" → O/X Table

**원문 표현:** "제자리암, 경계성종양 보장내용에 따라 비교"

**컴파일 결과:**
```
보장 가능 여부 = O/X 테이블
  - 행: 담보 항목 (진단비, 수술비, 항암약물, 표적항암, 다빈치치료)
  - 열: 보험사
  - 셀: O (보장) / X (미보장) / - (정보 없음)
  - ❌ "B사가 더 낫다" 금지
  - ✅ Evidence 링크 (약관 근거)
```

---

## FAQ 구조 (4 Categories)

inca_dio.pdf에서 정의한 FAQ 4개 카테고리:

1. **단순보험료 비교**
   - 전체
   - 일반/무해지 비교
   - 유병자/건강 비교 (현재 데이터 미제공)

2. **상품/담보 설명**
   - 보장개시일
   - 면책사항
   - 보장한도
   - 감액기간 및 비율
   - 가입나이

3. **상품 비교**
   - 통합
   - 암2대
   - 간병비 (현재 데이터 미제공)
   - 종신환급율 (현재 데이터 미제공)
   - 전체(보험료 우선) / 전체(보상 우선)

4. **보험 상식**
   - 보험용어
   - 보상하지않는손해
   - 간병비
   - 보험금청구서류

---

## 예제 1: 보험료 정렬 비교

### 입력
```
프롬프트: "가장 저렴한 보험료 정렬순으로 4개만 비교해줘"
FAQ 클릭: "일반/무해지 비교"
```

### 필수 비교 축
- 총납입보험료 (일반 / 무해지)
- 월납보험료 (일반 / 무해지)
- 정렬 기준: 총납입보험료 일반 오름차순
- 출력 개수: 4개

### ViewModel 출력 구성
```json
{
  "answer_blocks": [
    {
      "type": "filter_summary",
      "content": "정렬 기준: 총납입보험료 일반 (오름차순) / 출력 개수: 4개"
    }
  ],
  "comparison_table": {
    "sort_by": "총납입보험료_일반_asc",
    "columns": ["순위", "보험사", "상품명", "총납입보험료_일반", "총납입보험료_무해지", "월납보험료_일반", "월납보험료_무해지"],
    "rows": [
      {"순위": 1, "보험사": "A사", "상품명": "통합보험", "총납입보험료_일반": "2,448,000원", "총납입보험료_무해지": "2,352,000원", ...},
      {"순위": 2, "보험사": "B사", "상품명": "통합B보험", "총납입보험료_일반": "2,712,000원", ...}
    ],
    "visual_emphasis": {
      "min_value_style": "blue",
      "max_value_style": "red"
    }
  },
  "evidence_panel": [],
  "warnings": []
}
```

### 금지 표현
- ❌ "A사 상품을 추천합니다"
- ❌ "A사가 가장 유리합니다"
- ❌ "B사보다 A사가 저렴하므로 선택하세요"

### 허용 표현
- ✅ "보험료 기준 정렬"
- ✅ "최저 보험료: 2,448,000원 (A사)"
- ✅ 파란색/빨간색 시각적 강조

---

## 예제 2: 담보별 조건 차이

### 입력
```
프롬프트: "암직접입원비 담보 중 보장한도가 다른 상품 찾아줘"
FAQ 클릭: "보장한도"
```

### 필수 비교 축
- 담보명: "암직접입원비"
- 비교 슬롯: "보장한도"
- 차이 감지: 보장한도 값이 다른 보험사 하이라이트

### ViewModel 출력 구성
```json
{
  "answer_blocks": [
    {
      "type": "filter_summary",
      "content": "담보명: 암직접입원비 / 비교 항목: 보장한도"
    },
    {
      "type": "difference_summary",
      "content": "A사의 보장한도가 다른 보험사와 다릅니다."
    }
  ],
  "comparison_table": {
    "rows": [
      {"구분": "상품명", "A사": "통합보험", "B사": "...", "C사": "..."},
      {"구분": "담보명", "A사": "암직접입원비", "B사": "...", "C사": "..."},
      {"구분": "보장한도", "A사": "1~120일", "B사": "1~180일", "C사": "1~180일", "highlight": ["A사"]}
    ]
  },
  "evidence_panel": [
    {"insurer": "A사", "doc_type": "가입설계서", "page": 3, "excerpt": "암직접입원비 1~120일 한도"},
    {"insurer": "B사", "doc_type": "가입설계서", "page": 4, "excerpt": "암직접입원비 1~180일 한도"}
  ],
  "warnings": []
}
```

### 금지 표현
- ❌ "A사 상품이 불리합니다"
- ❌ "B사, C사가 더 좋은 조건입니다"

### 허용 표현
- ✅ "A사의 보장한도가 다른 보험사와 다릅니다"
- ✅ "A사: 1~120일, B사/C사: 1~180일"

---

## 예제 3: 특정 보험사 담보 비교

### 입력
```
프롬프트: "삼성화재, 메리츠화재의 암진단비를 비교해줘"
FAQ 클릭: "통합"
```

### 필수 비교 축
- 보험사 필터: ["삼성화재", "메리츠화재"]
- 담보명: "암진단비"
- 비교 슬롯: [보장금액, 지급조건, 대기기간, 면책사항]

### ViewModel 출력 구성
```json
{
  "answer_blocks": [
    {
      "type": "filter_summary",
      "content": "보험사: 삼성화재, 메리츠화재 / 담보: 암진단비"
    }
  ],
  "comparison_table": {
    "columns": ["항목", "삼성화재", "메리츠화재"],
    "rows": [
      {"항목": "상품명", "삼성화재": "...", "메리츠화재": "..."},
      {"항목": "보장금액", "삼성화재": "3,000만원", "메리츠화재": "2,000만원"},
      {"항목": "지급조건", "삼성화재": "최초 1회", "메리츠화재": "최초 1회"},
      {"항목": "대기기간", "삼성화재": "90일", "메리츠화재": "90일"},
      {"항목": "유사암 제외", "삼성화재": "O", "메리츠화재": "O"}
    ]
  },
  "evidence_panel": [
    {"insurer": "삼성화재", "doc_type": "가입설계서", "page": 2, "excerpt": "암진단비 3,000만원 (최초 1회, 90일 대기)"},
    {"insurer": "메리츠화재", "doc_type": "가입설계서", "page": 3, "excerpt": "암진단비 2,000만원"}
  ],
  "warnings": []
}
```

### 금지 표현
- ❌ "삼성화재가 보장금액이 더 높아 유리합니다"
- ❌ "메리츠화재보다 삼성화재를 선택하세요"

### 허용 표현
- ✅ "삼성화재: 3,000만원, 메리츠화재: 2,000만원"
- ✅ 금액 차이 셀 강조

---

## 예제 4: 질병별 보장 내용 비교

### 입력
```
프롬프트: "제자리암, 경계성종양 보장내용에 따라 A사, B사 상품 비교해줘"
FAQ 클릭: "통합"
```

### 필수 비교 축
- 질병명: ["제자리암", "경계성종양"]
- 보험사 필터: ["A사", "B사"]
- 비교 담보: [진단비, 수술비, 항암약물, 표적항암, 다빈치치료]

### ViewModel 출력 구성
```json
{
  "answer_blocks": [
    {
      "type": "filter_summary",
      "content": "질병: 제자리암, 경계성종양 / 보험사: A사, B사 / 비교 담보: 5개"
    }
  ],
  "comparison_table": {
    "title": "보장 가능 여부",
    "columns": ["구분", "담보 항목", "A사", "B사"],
    "rows": [
      {"구분": "상품명", "담보 항목": "", "A사": "...", "B사": "..."},
      {"구분": "제자리암, 경계성종양", "담보 항목": "진단비", "A사": "O", "B사": "O"},
      {"구분": "제자리암, 경계성종양", "담보 항목": "수술비", "A사": "O", "B사": "O"},
      {"구분": "제자리암, 경계성종양", "담보 항목": "항암약물", "A사": "O", "B사": "O"},
      {"구분": "제자리암, 경계성종양", "담보 항목": "표적항암", "A사": "X", "B사": "O"},
      {"구분": "제자리암, 경계성종양", "담보 항목": "다빈치치료", "A사": "O", "B사": "X"}
    ]
  },
  "evidence_panel": [
    {"insurer": "A사", "doc_type": "약관", "page": 12, "excerpt": "제자리암 진단비 O, 표적항암 미보장"},
    {"insurer": "B사", "doc_type": "약관", "page": 15, "excerpt": "제자리암 표적항암 O, 다빈치치료 미보장"}
  ],
  "warnings": [
    {
      "type": "note",
      "content": "보장 여부는 약관 기준이며, 정확한 보장 범위는 약관 확인이 필요합니다."
    }
  ]
}
```

### 금지 표현 (원문의 "종합 평가" 구현)
- ❌ "보험료, 보장한도 등 종합적으로 판단하여 B사를 추천합니다"
- ❌ "A사보다 B사가 더 나은 상품입니다"
- ❌ "종합적으로 볼 때 B사가 유리합니다"

### 허용 표현 (컴파일 결과)
- ✅ O/X 테이블 (보장 가능 여부만)
- ✅ "A사: 표적항암 X, 다빈치치료 O / B사: 표적항암 O, 다빈치치료 X"
- ✅ 차이 셀 강조
- ✅ "약관 확인 필요" 주석

---

## 제공 데이터 (FAQ ①~⑦)

### ① 전체 보험료
- 호출 API (설명 예정)
- **현재 상태:** data/호출_api/ 보류 (CLAUDE.md)

### ② 일반/무해지 비교
- 일반 = ①전체 × 배수 (일반보험요율예시.xlsx)
- 무해지 = ①전체
- **현재 상태:** 배수 테이블 존재 (구현 가능)

### ③ 유병자/건강 비교
- **현재 상태:** 미제공 데이터 (불가)

### ④ 상품/담보 설명
- 출처: 가입설계서, 약관, 상품설명서, 사업방법서
- **현재 상태:** 문서 존재 (구현 가능)

### ⑤ 상품 비교
- 출처: 전체보험료 + 가입설계서 + 약관 + 상품설명서 + 사업방법서
- 간병비 / 종신환급율: 미제공 (불가)
- **현재 상태:** 부분 가능 (보험료 제외 시 비교표만)

### ⑥ 보험용어
- 출처: 보험용어정의_ver01.docx, 생명보험_용어사전_안내자료.pdf
- **현재 상태:** 문서 존재 (구현 가능)

### ⑦ 보상하지않는 손해, 보험금청구서류
- 출처: 각사별 약관
- **현재 상태:** 약관 존재 (구현 가능)

---

## ViewModel 필수 구성 요소

모든 예제는 다음 ViewModel 구조를 사용한다:

```typescript
interface ViewModel {
  // 질의 요약 (입력 조건 표시)
  answer_blocks: AnswerBlock[];

  // 비교 테이블 (사실 기반 값 나열)
  comparison_table: ComparisonTable;

  // 근거 패널 (문서 인용)
  evidence_panel: EvidencePanel[];

  // 경고/주석 (사실 기반 상태만)
  warnings: Warning[];
}
```

---

## Constitutional Compliance 검증 기준

### 금지 표현 (Forbidden Phrases) - 정규식 검증

```regex
# 추천 문구
(추천|권장|선택하세요|고르세요|가입하세요)

# 우열 판단
(더 좋|더 나[은음]|유리|불리|뛰어남|우수|최선|최고)

# 해석 문구
(사실상|실질적으로|거의|유사|비슷|같은 담보|동일)

# 추론 문구
(종합적으로|결론적으로|판단|평가|분석 결과)
```

### 허용 표현 (Allowed Phrases)

```regex
# 사실 기반 비교
(다릅니다|같습니다|차이|보장|미보장|O|X)

# 정렬/강조
(정렬|최저|최고|오름차순|내림차순)

# 근거 명시
(약관 기준|가입설계서 기준|확인 필요|정보 없음)
```

---

## 다음 단계 (Implementation)

1. ViewModel 스키마 고정 (JSON Schema or TypeScript)
2. Backend Assembler 구현 (CompareResult → ViewModel)
3. Frontend Renderer 구현 (ViewModel → UI Components)
4. E2E Tests (Examples 1-4 + Forbidden Phrase Detection)

---

**Document Status:** APPROVED
**Constitutional Compliance:** VERIFIED (No recommendation/judgment/interpretation)
**Compilation Rule:** Applied (UI expression ≠ AI judgment)
