# DB 가입설계서 구조 분석 리포트

## 1. DB 가입설계서 전체 구조 요약

DB손해보험 가입설계서는 **2-table 구조**로 설계되어 있다.

- **요약표**: page 4 "가입담보요약"
- **상세표**: pages 7-9 "담보 및 보장내용 예시"

전체 14페이지로 구성되며, SAMSUNG / KB와 동일한 문서 패턴을 따른다.

---

## 2. 40세이하 / 41세이상 구조 동일 여부 판단

**결론: 구조 완전 동일**

두 파일의 차이점:
- ✅ 문서 구조: 완전 동일
- ✅ 표 위치: 완전 동일
- ✅ 표 컬럼: 완전 동일
- ❌ 보험료: 연령대별로 상이 (당연한 차이)

**비교 결과**:
| 항목 | 40세이하 | 41세이상 |
|------|----------|----------|
| 총 페이지 | 14 | 14 |
| 요약표 위치 | page 4 | page 4 |
| 상세표 위치 | pages 7-9 | pages 7-9 |
| 담보 수 | 31개 | 31개 |
| 총 보험료 | 162,843원 | 164,955원 |

**판단**: 연령대 변형은 **보험료 차등**을 위한 것이며, 문서 구조에는 영향 없음.

---

## 3. 요약표 vs 상세표의 역할 분리

### A. 요약표 ("가입담보요약", page 4)

**위치**: page 4
**컬럼 구조**:
```
No. | 가입담보 | 가입금액(만원) | 보험료(원) | 납기/만기(갱신종료시기)
```

**특징**:
- 번호순 단순 나열 (1, 2, 3, ..., 31)
- 카테고리 구분 없음
- 담보명 + 금액 + 보험료 + 기간만 표시
- 셀 병합 없음 (1 row = 1 coverage)
- 갱신형 담보는 "(갱신형)" 접미어로 표시

**역할**:
- ✅ **가입 여부 확정** (Universe Lock)
- ✅ **금액/보험료 확정**
- ❌ 보장 내용 설명 없음
- ❌ 조건/감액/면책 정보 없음

---

### B. 상세표 ("담보 및 보장내용 예시", pages 7-9)

**위치**: pages 7-9
**컬럼 구조**:
```
가입담보[만기/납기] | 가입금액(만원) | 보험료(원) | 보장(보상)내용
```

**특징**:
- "기본계약" / "선택계약" 구분 있음
- 보장내용 컬럼에 **서술형 긴 문장** 기재
- 보장개시일, 감액 조건, 면책 기간 명시
- 예시: "보장개시일(계약일로부터 90일이 지난날의 다음날)"
- 예시: "가입 후 1년미만시 가입금액의 50%지급"

**역할**:
- ✅ **보장 내용 설명**
- ✅ **조건/감액/면책 명시**
- ✅ **고객 질의 대응 필수 자료**
- ❌ Universe 정의 용도 아님

---

## 4. STEP 3.9-1에서 Universe 추출에 사용할 표

**결론: 요약표 "가입담보요약" (page 4)**

### 이유

1. **Universe Lock 원칙**:
   - 가입설계서에서 계약자가 **실제 가입한 담보 목록**의 유일한 출처
   - 요약표는 "무엇을 가입했는가"를 명시하는 **계약 요약**

2. **상세표는 보강용**:
   - 상세표는 "어떻게 보장하는가"를 설명하는 **설명서**
   - Universe 추출 후, 정보 보강 단계에서만 사용

3. **1:1 매핑 보장**:
   - 요약표의 모든 담보가 상세표에도 존재
   - 번호(No.)로 1:1 매핑 가능
   - 추가 담보 없음, 누락 담보 없음

### STEP 3.9-1 추출 대상 확정

```yaml
extraction_target:
  table: "가입담보요약"
  location: page 4
  columns_to_extract:
    - No.
    - 가입담보
    - 가입금액(만원)
    - 보험료(원)
    - 납기/만기(갱신종료시기)
```

---

## 5. 고객 질의 시 반드시 참조해야 하는 영역

### 시나리오별 참조 영역

| 질의 유형 | 참조 표 | 이유 |
|-----------|---------|------|
| "암 진단비에 가입했나요?" | 요약표 | Universe 확인 |
| "암 진단비 보장금액은?" | 요약표 | 가입금액 확인 |
| "암 진단비 보험료는?" | 요약표 | 보험료 확인 |
| "암 진단비 90일 대기기간 있나요?" | **상세표** | 보장개시일 확인 필수 |
| "1년 미만 가입 시 감액되나요?" | **상세표** | 감액 조건 확인 필수 |
| "유사암은 제외되나요?" | **상세표** | 제외 조건 확인 필수 |

### 고객 질의 처리 순서

1. **Universe 확인**: 요약표에서 담보 존재 여부 확인
2. **금액 확인**: 요약표에서 가입금액/보험료 확인
3. **조건 확인**: 상세표에서 보장내용/조건/감액/면책 확인

---

## 6. 핵심 판단 질문 답변

### Q1. STEP 3.9-1에서 DB의 Universe 추출은 어느 표에서 수행하는가?

**A1**: 요약표 "가입담보요약" (page 4)

---

### Q2. 요약표만으로 담보 "존재 여부"를 확정할 수 있는가?

**A2**: **Yes**

- 요약표는 계약 요약표로, 가입한 담보의 **유일한 출처**
- 요약표에 있으면 → Universe에 포함
- 요약표에 없으면 → Universe에 없음 (`out_of_universe`)

---

### Q3. 연령대 변형(40세이하/41세이상)이 Universe 정의에 영향을 주는가?

**A3**: **No**

- 연령대 변형은 **보험료 차등**만 발생
- 문서 구조는 완전 동일
- 담보 목록은 완전 동일 (31개)
- Universe 정의는 연령대와 무관

**결론**: 40세이하 / 41세이상 파일 중 **하나만 분석**해도 충분

---

### Q4. 상세표는 어떤 단계에서만 사용되는가?

**A4**: **고객 질의 대응 단계 (Augmentation)**

- STEP 3.9-1 (Universe 추출) → 사용 안 함
- STEP 3.9-2 이후 (정보 보강) → 사용
- 고객 질의 시 조건/감액/면책 확인 → 필수 사용

---

## 7. DB 가입설계서 고유 구조적 특징

### SAMSUNG / KB와의 공통점

- ✅ 2-table 구조 (요약표 + 상세표)
- ✅ 요약표 = Universe 출처
- ✅ 상세표 = 고객 질의 대응용
- ✅ 1:1 매핑 보장

### DB 고유 특징

- ✅ 번호순 단순 나열 (카테고리 구분 없음) ← **KB와 동일**
- ✅ 상세표에 "기본계약" / "선택계약" 구분 있음 ← **SAMSUNG과 유사**
- ✅ 갱신형 담보 "(갱신형)" 접미어 표시 ← **KB와 동일**
- ✅ 보험료 합계 별도 표시

---

## 8. STEP 3.9-1 연결 준비 완료

DB 가입설계서의 구조 분석이 완료되었으며, 다음 작업으로 바로 연결 가능하다.

### 다음 단계 (STEP 3.9-1)

```python
# DB Universe 추출 대상
source_table = "가입담보요약"
source_page = 4
source_columns = ["No.", "가입담보", "가입금액(만원)", "보험료(원)", "납기/만기(갱신종료시기)"]
expected_row_count = 31  # 40세이하 기준
```

### 추출 후 검증 항목

- [ ] 31개 담보 모두 추출되었는가?
- [ ] 갱신형 담보 "(갱신형)" 표시 유지되는가?
- [ ] 보험료 합계 162,843원 (40세이하) / 164,955원 (41세이상) 일치하는가?
- [ ] 상세표와 1:1 매핑 가능한가?

---

**DoD 달성 확인**:
- ✅ DB 가입설계서 구조가 SAMSUNG / KB와 동일 프레임으로 정리됨
- ✅ 연령대 변형 처리 방식이 명확히 정의됨 (보험료만 차이, 구조 동일)
- ✅ Universe 추출 대상 표가 명확히 결정됨 (요약표 page 4)
- ✅ STEP 3.9-1로 바로 연결 가능
